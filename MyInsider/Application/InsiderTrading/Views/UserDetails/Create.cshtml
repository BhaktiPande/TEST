@model InsiderTrading.Models.COUserInfoModel
@{
    ViewBag.Title = InsiderTrading.Common.Common.getResource("usr_ttl_11234");

}
<script>
    $(document).ready(function () {
        $("#addRoleMaster").on('show.bs.modal', function (event) {
            $(".modal-dialog").css({ width: '40%' });
            $.ajax({
                
                @*@Html.ActionLink(@InsiderTrading.Common.Common.getResource("usr_lbl_11339"), "Create", "RoleMaster", new { RoleId = 0, acid = @InsiderTrading.Common.ConstEnum.UserActions.CRUSER_ROLEMASTER_CREATE, frm = "emp", uid = Model.userInfoModel.UserInfoId }, new { @class = "create-link" })*@
                url: "@Url.Action("Create", "RoleMaster", new { acid = @InsiderTrading.Common.ConstEnum.UserActions.CRUSER_ROLEMASTER_CREATE, uid = Model.UserInfoId })",//"../TemplateMaster/Create?TemplateMasterId=0",
                data: { RoleId: "0", frm: "cousr" },
                method: "GET",
                success: function (response) {
                    //$("#myModal .modal-body").html('');
                    $("#addRoleMaster .modal-body").html(response);
                }
            });
        });
    });
</script>


@using (Html.BeginForm("Create", "UserDetails", new { acid = 2, ReturnUrl = ViewBag.ReturnUrl, formId = InsiderTrading.Common.ConstEnum.Code.frmAddUserDetails }, FormMethod.Post, new { @class = "", role = "", @autocomplete = "off" }))
            {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)
        <section class="content-header">
            <h1>@InsiderTrading.Common.Common.getResource("usr_ttl_11234")</h1></section>
            <section class="content">
                @Html.ValidationSummary("", new Dictionary<string, object> { { "class", "alert alert-danger" }, { "id", "divValidationSummaryModal" } })
                <div class="row">
                    <div class="col-lg-12">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">

                                        <div class="form-group">
                                            @Html.LabelFor(m => m.EmployeeId)
                                            @Html.TextBoxFor(m => m.EmployeeId, new { @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.EmployeeId)
                                        </div>

                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">

                                        <div class="form-group">
                                            @Html.LabelFor(m => m.LoginID)
                                            @Html.TextBoxFor(m => m.LoginID, new { @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.LoginID)
                                        </div>

                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">

                                        <div class="form-group">
                                            @Html.LabelFor(m => m.StatusCodeId)
                                            @Html.DropDownListFor(m => m.StatusCodeId, new SelectList(ViewBag.StatusDropDown, "Key", "Value", ""), new { @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.StatusCodeId)
                                        </div>

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">

                                        <div class="form-group">
                                            @Html.LabelFor(m => m.FirstName)
                                            @Html.TextBoxFor(m => m.FirstName, new { @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.FirstName)
                                        </div>

                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">

                                        <div class="form-group">
                                            @Html.LabelFor(m => m.MiddleName)
                                            @Html.TextBoxFor(m => m.MiddleName, new { @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.MiddleName)
                                        </div>

                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">

                                        <div class="form-group">
                                            @Html.LabelFor(m => m.LastName)
                                            @Html.TextBoxFor(m => m.LastName, new { @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.LastName)
                                        </div>

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">

                                        <div class="form-group">
                                            @Html.LabelFor(m => m.CompanyId)
                                            @Html.DropDownListFor(m => m.CompanyId, new SelectList(ViewBag.CompanyDropDown, "Key", "Value", ""), new { @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.CompanyId)
                                        </div>

                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">

                                        <div class="form-group">
                                            @Html.LabelFor(m => m.AssignedRole)
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <div class="form-group">
                                                <a href="javascript:void(0);" class="create-link" id="AT" type="button" data-toggle='modal' data-target='#addRoleMaster'>
                                                    @InsiderTrading.Common.Common.getResource("usr_lbl_11339")
                                                </a>
                                            </div>
                                            @*@Html.ActionLink(@InsiderTrading.Common.Common.getResource("usr_lbl_11285"), "Create", "RoleMaster", new { RoleId = 0, acid = @InsiderTrading.Common.ConstEnum.UserActions.CRUSER_ROLEMASTER_CREATE, frm = "cousr", uid = Model.UserInfoId }, new { @class = "create-link" })*@
                                            @Html.ListBox("SubmittedRole", new MultiSelectList(Model.DefaultRole, "Key", "Value", Model.AssignedRole.Select(m => m.Key)), new { multiple = "multiple", @class = "form-control multiselect" })
                                        </div>

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-8 col-md-8 col-sm-6 col-xs-12">
                                        <div class="row">
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">

                                                <div class="form-group">
                                                    @Html.LabelFor(m => m.MobileNumber)
                                                    @Html.TextBoxFor(m => m.MobileNumber, new { @class = "form-control", id = "txt_COMobNo" })
                                                    @Html.ValidationMessageFor(m => m.MobileNumber)
                                                </div>

                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">

                                                <div class="form-group">
                                                    @Html.LabelFor(m => m.EmailId)
                                                    @Html.TextBoxFor(m => m.EmailId, new { @class = "form-control" })
                                                    @Html.ValidationMessageFor(m => m.EmailId)
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-12">
                                        @Html.Hidden("confirm_role", "True")
                                        <button type="submit" id="cousr_detail_save" name="Create" class="btn btn-success" data-loading-text="Saving" autocomplete="off"><i class="fa fa-save"></i>@InsiderTrading.Common.Common.getResource("com_btn_14017")</button>
                                        @{
                                            if (InsiderTrading.Common.Common.CanPerform(InsiderTrading.Common.ConstEnum.UserActions.CRUSER_COUSER_DELETE))
                                            {
                                                if (Model != null && Model.UserInfoId > 0)
                                                {
                                                    <button type="submit" name="Delete" class="btn btn-success" data-loading-text="Deleting" autocomplete="off">@InsiderTrading.Common.Common.getResource("com_btn_14009")</button>
                                                    @*<input type="submit" value='@InsiderTrading.Common.Common.getResource("com_btn_14009")' class="btn btn-default" id="Delete" name="Delete" />*@
                                                }
                                            }

                                        }
                                        <button type="submit" name="Cancel" class="btn btn-success cancel" id="cancelButton" data-dismiss="modal"><i class="fa fa-times"></i> @InsiderTrading.Common.Common.getResource("com_btn_14010")</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.panel-body -->
                        </div>
                        <!-- /.panel -->
                    </div>
                    <!-- /.col-lg-12 -->
                </div>

                @Html.HiddenFor(m => m.UserInfoId)
                <input type="hidden" name="authorization" value="Create:@ViewBag.UserAction,Delete:@InsiderTrading.Common.ConstEnum.UserActions.CRUSER_COUSER_DELETE" />
            </section><!-- /.content -->

            }
<div class="modal fade" id="addRoleMaster" tabindex="-1" role="dialog" aria-labelledby="AddRoleMasterlabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
            </div>
        </div>
    </div>
</div>
 @Scripts.Render("~/bundles/userDetails")


@{
    var IsNewCORegistration = @ViewBag.NewCORegistration;
    var MobNumberCountryCode = @InsiderTrading.Common.ConstEnum.CountryCode;
}

<script type="text/javascript">
    var MobNumCountryCode = "@MobNumberCountryCode";
    var Chk_IsNewCORegistration = "@IsNewCORegistration";
    if(Chk_IsNewCORegistration)
    {
        $("#txt_COMobNo").val(MobNumCountryCode);
    }
</script>