@model InsiderTrading.Models.WeekForMonth
@{
    ViewBag.Title = "_ViewEventCalender";
}
<div class="col-xs-5 ViewCalender" style="padding-right:0">
    <div class="box-body" id="">
        @Html.Hidden("hidCurrentMonth", (object)ViewBag.CurrentMonth)
        @Html.Hidden("hidCurrentyear", (object)ViewBag.CurrentYear)
        <div class="dash-calendar" style="display: block;width:100px;">
            <div class="datepicker datepicker-inline">
                <div class="datepicker-days" style="display: block;width:500px;">
                    <table class="table-condensed">
                        <thead>
                            <tr>
                                <th style=" visibility:visible;" class="prev">

                                    <input type="button" value="«" class="prev" id="Prev" />
                                </th>
                                <th colspan="5" class="datepicker-switch">
                                    <div class="input-group date" id="Month-container" style="text-align:center;">
                                        @Html.TextBoxFor(model => model.Month, null, new { @class = "form-control TextAlignCenter" })
                                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                    </div>
                                </th>
                                <th style="visibility: visible;" class="next">
                                    <input type="button" value="»" class="next" id="Next" />
                                </th>
                            </tr>
                            <tr>
                                <th class="dow">Su</th>
                                <th class="dow">Mo</th>
                                <th class="dow">Tu</th>
                                <th class="dow">We</th>
                                <th class="dow">Th</th>
                                <th class="dow">Fr</th>
                                <th class="dow">Sa</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr id="week1">
                                @foreach (var item in Model.Week1)
                                {
                                    if (item != null)
                                    {
                                        if (item.IsBlocked == 0)
                                        {
                                            <td class="day">@item.dtDay</td>
                                        }
                                        else
                                        {
                                            <td class="day active" style="background-color: #333 !important;">@item.dtDay</td>
                                        }
                                    }
                                    else
                                    {
                                        <td class="old day"></td>
                                    }
                                }
                            </tr>
                            <tr id="week2">
                                @foreach (var item in Model.Week2)
                                {
                                    if (item != null)
                                    {
                                        if (item.IsBlocked == 0)
                                        {
                                            <td class="day">@item.dtDay</td>
                                        }
                                        else
                                        {
                                            <td class="day active" style="background-color: #333 !important;">@item.dtDay</td>
                                        }
                                    }
                                    else
                                    {
                                        <td class="old day"></td>
                                    }
                                }
                            </tr>
                            <tr id="week3">
                                @foreach (var item in Model.Week3)
                                {
                                    if (item != null)
                                    {
                                        if (item.IsBlocked == 0)
                                        {
                                            <td class="day">@item.dtDay</td>
                                        }
                                        else
                                        {
                                            <td class="day active" style="background-color: #333 !important;">@item.dtDay</td>
                                        }
                                    }
                                    else
                                    {
                                        <td class="old day"></td>
                                    }
                                }
                            </tr>
                            <tr id="week4">
                                @foreach (var item in Model.Week4)
                                {
                                    if (item != null)
                                    {
                                        if (item.IsBlocked == 0)
                                        {
                                            <td class="day">@item.dtDay</td>
                                        }
                                        else
                                        {
                                            <td class="day active" style="background-color: #333 !important;">@item.dtDay</td>
                                        }
                                    }
                                    else
                                    {
                                        <td class="old day"></td>
                                    }
                                }
                            </tr>
                            <tr id="week5">
                                @if (Model.Week5.Count == 0)
                                {
                                    <td class="old day"></td>
                                    <td class="old day"></td>
                                    <td class="old day"></td>
                                    <td class="old day"></td>
                                    <td class="old day"></td>
                                    <td class="old day"></td>
                                    <td class="old day"></td>
                                }
                                else
                                {
                                    var flagCount = 0;
                                    foreach (var item in Model.Week5)
                                    {
                                        flagCount++;
                                        if (item != null)
                                        {
                                            if (item.IsBlocked == 0)
                                            {
                                                <td class="day">@item.dtDay</td>
                                            }
                                            else
                                            {
                                                <td class="day active" style="background-color: #333 !important;">@item.dtDay</td>
                                            }
                                        }
                                        else
                                        {
                                            <td class="old day"></td>
                                        }
                                    }
                                    while (flagCount < 7)
                                    {
                                        <td class="old day"></td>
                                        flagCount++;
                                    }
                                }
                            </tr>
                            <tr id="week6">
                                @if (Model.Week6.Count == 0)
                                {
                                    <td class="old day"></td>
                                    <td class="old day"></td>
                                    <td class="old day"></td>
                                    <td class="old day"></td>
                                    <td class="old day"></td>
                                    <td class="old day"></td>
                                    <td class="old day"></td>
                                }
                                else
                                {
                                    var flagCount = 0;
                                    foreach (var item in Model.Week6)
                                    {
                                        flagCount++;
                                        if (item != null)
                                        {
                                            if (item.IsBlocked == 0)
                                            {
                                                <td class="day">@item.dtDay</td>
                                            }
                                            else
                                            {
                                                <td class="day active" style="background-color: #333 !important;">@item.dtDay</td>
                                            }
                                        }
                                        else
                                        {
                                            <td class="old day"></td>
                                        }
                                    }
                                    while (flagCount < 7)
                                    {
                                        <td class="old day"></td>
                                        flagCount++;
                                    }
                                }
                            </tr>
                        </tbody>
                       
                    </table>
                </div>

                <div style="display: none;" class="datepicker-months">
                    <table class="table-condensed">
                        <thead>
                            <tr>
                                <th style="visibility: visible;" class="prev">«</th>
                                <th colspan="5" class="datepicker-switch">2015</th>
                                <th style="visibility: visible;" class="next">»</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="7">
                                    <span class="month">Jan</span><span class="month">Feb</span><span class="month">Mar</span><span class="month">Apr</span><span class="month">May</span><span class="month">Jun</span><span class="month">Jul</span><span class="month">Aug</span><span class="month">Sep</span><span class="month">Oct</span><span class="month">Nov</span><span class="month">Dec</span>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <th style="display: none;" colspan="7" class="today">Today</th>
                            </tr>
                            <tr>
                                <th style="display: none;" colspan="7" class="clear">Clear</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        @{
            if (ViewBag.PageFrom == "FinancialYear")
            {
                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-12 box-footer">
                    <a class="btn btn-success" href='@Url.Action("index", "TradingWindowEvent", new { acid = 125, FinancialYearId = 0 })' role="button"><i class="fa fa-times"></i> @InsiderTrading.Common.Common.getResource("com_btn_14010")</a>
                </div>
            }
            else if (ViewBag.PageFrom == "OtherEvent")
            {
                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-12 box-footer">
                    <a class="btn btn-success" href='@Url.Action("Index", "TradingWindowsOther", new { acid = InsiderTrading.Common.ConstEnum.UserActions.TRADING_WINDOW_OTHER_VIEW })' role="button"><i class="fa fa-times"></i> @InsiderTrading.Common.Common.getResource("com_btn_14010")</a>
                </div>
            }
        }

        <div class="div-spacer"></div>
        <div class="div-spacer"></div>
    </div>
</div>
    <input type="hidden" value="@ViewBag.NewMonth" id="NewMonth" />
<input type="hidden" value="@ViewBag.PageFrom" id="PageFrom" />
    <div class="col-xs-7" style="min-height: 100px; padding-right: 0;">
        <div class="col-xs-12">
            <div id="Event-table" class="col-xs-12 search" gridtype="@ViewBag.GridType">
                <input type="hidden" value="@ViewBag.Param1" id="1" gridtype="@ViewBag.GridType" />
                <input type="hidden" value="@ViewBag.LUID" id="2" gridtype="@ViewBag.GridType" />
                @{
                    Html.RenderAction("Index", "DatatableGrid", new { type = @ViewBag.GridType, btnSearch = "", sSortCol = "0", acid = ViewBag.ViewCalenderAction, sDisplayLength = "9", sPagingLengthMenu = "[9,18,32,40,80]", sCallBackFunction = "datatableCallFunction" });
                }
            </div>
        </div>
    </div>
    <div>&nbsp;</div>


@Html.Hidden("calender", Url.Action("Calender", "TradingWindowsOther"))
@Html.Hidden("viewall", Url.Action("ViewAll", "TradingWindowsOther"))

